<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Touch-friendly web UI for managing V4L2 camera controls with embedded video preview">
  <title>V4L2 Controls - Installation Guide</title>
  <style>
    :root {
      color-scheme: light dark;
      --bg: #0f1115;
      --panel: #1b1f2a;
      --panel-strong: #222838;
      --tile: #1c2230;
      --accent: #63b3ff;
      --accent-strong: #4ea1ff;
      --text: #e6e9ef;
      --muted: #9aa3b2;
      --border: #2b3040;
      --shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
      --gradient: linear-gradient(145deg, rgba(78, 161, 255, 0.12), rgba(0, 0, 0, 0));
      --hero-gradient: linear-gradient(135deg, rgba(78, 161, 255, 0.2), rgba(147, 51, 234, 0.15));
    }

    [data-theme="light"] {
      color-scheme: light;
      --bg: #f6f7fb;
      --panel: #ffffff;
      --panel-strong: #f0f2f7;
      --tile: #ffffff;
      --accent: #3d7bff;
      --accent-strong: #2f62d8;
      --text: #1a1f2b;
      --muted: #5c677d;
      --border: #e3e6ef;
      --shadow: 0 12px 30px rgba(30, 46, 90, 0.12);
      --gradient: linear-gradient(145deg, rgba(61, 123, 255, 0.1), rgba(255, 255, 255, 0));
      --hero-gradient: linear-gradient(135deg, rgba(61, 123, 255, 0.15), rgba(147, 51, 234, 0.1));
    }

    [data-theme="light"] .code-block code {
      color: #2e3440;
    }

    [data-theme="light"] .code-block .keyword {
      color: #7c3aed;
    }

    [data-theme="light"] .code-block .string {
      color: #059669;
    }

    [data-theme="light"] .code-block .comment {
      color: #6b7280;
    }

    [data-theme="light"] .code-block .command {
      color: #2563eb;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 20px;
    }

    header {
      padding: 20px 0;
      border-bottom: 1px solid var(--border);
      background: var(--panel);
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(10px);
    }

    header .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
    }

    header h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 700;
    }

    .header-icons {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .icon-link,
    .theme-toggle {
      padding: 8px;
      border-radius: 8px;
      background: transparent;
      color: var(--text);
      border: none;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.1s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
    }

    .icon-link:hover,
    .theme-toggle:hover {
      background: var(--panel-strong);
      transform: translateY(-1px);
    }

    .theme-icon {
      display: none;
    }

    .sun-icon {
      display: block;
    }

    [data-theme="light"] .sun-icon {
      display: none;
    }

    [data-theme="light"] .moon-icon {
      display: block;
    }

    .hero {
      background: var(--panel);
      background-image: var(--hero-gradient);
      border-radius: 20px;
      padding: 60px 40px;
      margin: 40px 0;
      text-align: center;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    .hero h2 {
      margin: 0 0 16px;
      font-size: 42px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent-strong), #9333ea);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero p {
      margin: 0 0 32px;
      font-size: 18px;
      color: var(--muted);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .hero .install-command {
      background: var(--tile);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px 24px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size: 15px;
      text-align: left;
      max-width: 700px;
      margin: 0 auto 20px;
      position: relative;
      overflow-x: auto;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .hero .install-command code {
      color: var(--accent);
      display: block;
      white-space: nowrap;
      flex: 1;
    }

    .copy-button {
      background: var(--panel-strong);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 8px 12px;
      color: var(--text);
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .copy-button:hover {
      background: var(--accent);
      color: #0b1020;
      transform: translateY(-1px);
    }

    .copy-button.copied {
      background: #4ade80;
      color: #0b1020;
    }

    .copy-button svg {
      width: 16px;
      height: 16px;
    }

    .github-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      background: var(--accent);
      color: #0b1020;
      text-decoration: none;
      border-radius: 10px;
      font-weight: 600;
      transition: transform 0.1s ease, box-shadow 0.2s ease;
      margin-top: 12px;
    }

    .github-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(78, 161, 255, 0.3);
    }

    .section {
      background: var(--panel);
      border-radius: 16px;
      padding: 32px;
      margin: 24px 0;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    .section h3 {
      margin-top: 0;
      font-size: 24px;
      font-weight: 700;
      color: var(--text);
    }

    .section h4 {
      font-size: 18px;
      font-weight: 600;
      margin-top: 24px;
      margin-bottom: 12px;
      color: var(--text);
    }

    .code-block {
      background: var(--tile);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 16px 20px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size: 14px;
      overflow-x: auto;
      margin: 12px 0;
      line-height: 1.6;
    }

    .code-block code {
      color: #c8d3f5;
      white-space: pre-wrap;
      display: block;
    }

    .code-block .keyword {
      color: #c099ff;
      font-weight: 600;
    }

    .code-block .string {
      color: #c3e88d;
    }

    .code-block .comment {
      color: #7982a9;
      font-style: italic;
    }

    .code-block .command {
      color: #82aaff;
    }

    .steps {
      list-style: none;
      padding: 0;
      counter-reset: step-counter;
    }

    .steps li {
      counter-increment: step-counter;
      position: relative;
      padding-left: 48px;
      margin: 20px 0;
    }

    .steps li::before {
      content: counter(step-counter);
      position: absolute;
      left: 0;
      top: 0;
      width: 32px;
      height: 32px;
      background: var(--accent);
      color: #0b1020;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
    }

    .note {
      background: var(--panel-strong);
      border-left: 3px solid var(--accent);
      border-radius: 8px;
      padding: 16px 20px;
      margin: 16px 0;
      font-size: 14px;
    }

    .note strong {
      color: var(--accent-strong);
    }

    .command-grid {
      display: grid;
      gap: 12px;
      margin: 16px 0;
    }

    .command-item {
      background: var(--tile);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px 16px;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 12px;
      align-items: center;
    }

    .command-item code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size: 14px;
      color: var(--accent);
    }

    .command-item .description {
      font-size: 13px;
      color: var(--muted);
      grid-column: 1 / -1;
    }

    footer {
      text-align: center;
      padding: 40px 20px;
      color: var(--muted);
      font-size: 14px;
      border-top: 1px solid var(--border);
      margin-top: 60px;
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 768px) {
      .hero {
        padding: 40px 24px;
      }

      .hero h2 {
        font-size: 32px;
      }

      .hero p {
        font-size: 16px;
      }

      .section {
        padding: 24px 20px;
      }

      .hero .install-command {
        font-size: 13px;
        padding: 16px 18px;
      }
    }

    .checkmark {
      color: #4ade80;
      margin-right: 8px;
    }

    .screenshot-container {
      margin: 40px 0;
      text-align: center;
    }

    .screenshot {
      width: 100%;
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      display: none;
    }

    .screenshot-light.active {
      display: block;
    }

    .screenshot-dark.active {
      display: block;
    }

    .screenshot-controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 16px;
    }

    .pip-label {
      cursor: pointer;
    }

    .pip-input {
      display: none;
    }

    .pip {
      display: block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--border);
      transition: all 0.3s ease;
    }

    .pip-input:checked + .pip {
      background: var(--accent);
      transform: scale(1.3);
    }

    .pip-label:hover .pip {
      background: var(--muted);
    }

    .pip-input:checked + .pip:hover {
      background: var(--accent-strong);
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>V4L2 Controls</h1>
      <div class="header-icons">
        <a href="https://github.com/justinh-rahb/v4l2-ctrls" class="icon-link" aria-label="View on GitHub">
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
          </svg>
        </a>
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
          <svg class="theme-icon sun-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
          </svg>
          <svg class="theme-icon moon-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278zM4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="hero">
      <p>Touch-friendly web UI for managing V4L2 camera controls with embedded video preview</p>

      <div class="install-command">
        <code id="install-cmd">curl -sSL https://justinh-rahb.github.io/v4l2-ctrls/install.sh | sudo bash</code>
        <button class="copy-button" onclick="copyToClipboard('install-cmd', this)">
          <svg fill="currentColor" viewBox="0 0 16 16">
            <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
            <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
          </svg>
          Copy
        </button>
      </div>

      <a href="https://github.com/justinh-rahb/v4l2-ctrls" class="github-link">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
        </svg>
        View on GitHub
      </a>
    </div>

    <div class="screenshot-container">
      <img src="screenshot_light.png" alt="V4L2 Controls User Interface - Light Theme" class="screenshot screenshot-light">
      <img src="screenshot_dark.png" alt="V4L2 Controls User Interface - Dark Theme" class="screenshot screenshot-dark">
      <div class="screenshot-controls">
        <label class="pip-label">
          <input type="radio" name="screenshot-toggle" value="light" class="pip-input">
          <span class="pip"></span>
        </label>
        <label class="pip-label">
          <input type="radio" name="screenshot-toggle" value="dark" class="pip-input">
          <span class="pip"></span>
        </label>
      </div>
    </div>

    <div class="section">
      <h3>One-Line Install</h3>
      <p>The easiest way to get started is with the automated installer script:</p>

      <div class="code-block">
        <code>curl -sSL https://justinh-rahb.github.io/v4l2-ctrls/install.sh | sudo bash</code>
      </div>

      <p>To install a different branch, tag, or commit, set <code>INSTALL_REF</code>:</p>

      <div class="code-block">
        <code>curl -sSL https://justinh-rahb.github.io/v4l2-ctrls/install.sh | sudo INSTALL_REF=feature-branch bash</code>
      </div>
    </div>

    <div class="section">
      <h3>What the Installer Does</h3>
      <ul class="steps">
        <li><span class="checkmark">‚úÖ</span> Ensures <code>v4l2-ctl</code> is available (installs <code>v4l-utils</code> if needed)</li>
        <li><span class="checkmark">‚úÖ</span> Verifies Python 3 and pip (installs <code>python3-pip</code> + <code>python3-venv</code> if missing)</li>
        <li><span class="checkmark">‚úÖ</span> Downloads the <code>INSTALL_REF</code> archive to <code>~/v4l2-ctrls</code> (backs up any existing install)</li>
        <li><span class="checkmark">‚úÖ</span> Creates a Python virtual environment and installs requirements</li>
        <li><span class="checkmark">‚úÖ</span> Creates a systemd service for the current sudo user</li>
        <li><span class="checkmark">‚úÖ</span> Prompts to enable/start the service</li>
      </ul>

      <div class="note">
        <strong>Note:</strong> The installer must be run as root. It uses the sudo user to determine the install path and service user.
      </div>
    </div>

    <div class="section">
      <h3>Defaults Created by the Installer</h3>
      <ul>
        <li><strong>Install path:</strong> <code>/home/&lt;user&gt;/v4l2-ctrls</code></li>
        <li><strong>Service:</strong> <code>/etc/systemd/system/v4l2-ctrls.service</code></li>
        <li><strong>Bind address:</strong> <code>0.0.0.0</code></li>
        <li><strong>Port:</strong> <code>5000</code></li>
        <li><strong>Camera URL:</strong> <code>http://127.0.0.1/</code> (app default)</li>
        <li><strong>Stream paths</strong> (app defaults):
          <ul>
            <li>MJPG: <code>{prefix}stream.mjpg</code></li>
            <li>Snapshot: <code>{prefix}snapshot.jpg</code></li>
            <li>WebRTC: <code>{prefix}webrtc</code></li>
          </ul>
        </li>
      </ul>

      <p>Access the UI after install:</p>
      <div class="code-block">
        <code>http://&lt;your-pi-ip&gt;:5000</code>
      </div>
    </div>

    <div class="section">
      <h3>Customize the Service</h3>
      <p>Edit the service file to customize your installation:</p>

      <div class="code-block">
        <code>sudo nano /etc/systemd/system/v4l2-ctrls.service</code>
      </div>

      <h4>Example with Custom Device and Stream URLs</h4>
      <div class="code-block">
        <code><span class="keyword">[Unit]</span>
<span class="keyword">Description</span>=V4L2 Camera Controls Web Interface
<span class="keyword">After</span>=network.target

<span class="keyword">[Service]</span>
<span class="keyword">Type</span>=simple
<span class="keyword">User</span>=pi
<span class="keyword">WorkingDirectory</span>=/home/pi/v4l2-ctrls
<span class="keyword">ExecStart</span>=/home/pi/v4l2-ctrls/venv/bin/python3 /home/pi/v4l2-ctrls/v4l2-ctrls.py \
  --device /dev/video2 \
  --camera-url <span class="string">"http://10.0.3.229:8081/"</span> \
  --stream-path-mjpg <span class="string">"{prefix}?action=stream"</span> \
  --stream-path-snapshot <span class="string">"{prefix}?action=snapshot"</span> \
  --host 0.0.0.0 \
  --port 5000
<span class="keyword">Restart</span>=always
<span class="keyword">RestartSec</span>=10

<span class="keyword">[Install]</span>
<span class="keyword">WantedBy</span>=multi-user.target</code>
      </div>

      <h4>Common MainsailOS/FluiddPi Streamer Defaults</h4>
      <p>If you're using the standard MainsailOS/FluiddPi webcam endpoints (often via crowsnest), these settings are typical:</p>

      <div class="code-block">
        <code><span class="keyword">ExecStart</span>=/home/pi/v4l2-ctrls/venv/bin/python3 /home/pi/v4l2-ctrls/v4l2-ctrls.py \
  --camera-url <span class="string">"http://127.0.0.1/"</span> \
  --stream-prefix /dev/video0=/webcam/ \
  --stream-path-mjpg <span class="string">"{prefix}?action=stream"</span> \
  --stream-path-snapshot <span class="string">"{prefix}?action=snapshot"</span> \
  --host 0.0.0.0 \
  --port 5000</code>
      </div>

      <p>After making changes, reload and restart:</p>
      <div class="code-block">
        <code><span class="command">sudo</span> systemctl daemon-reload
<span class="command">sudo</span> systemctl restart v4l2-ctrls</code>
      </div>
    </div>

    <div class="section">
      <h3>Managing the Service</h3>
      <div class="code-block">
        <code><span class="command">sudo</span> systemctl status v4l2-ctrls
<span class="command">sudo</span> journalctl -u v4l2-ctrls -f
<span class="command">sudo</span> systemctl restart v4l2-ctrls
<span class="command">sudo</span> systemctl stop v4l2-ctrls
<span class="command">sudo</span> systemctl start v4l2-ctrls
<span class="command">sudo</span> systemctl disable v4l2-ctrls
<span class="command">sudo</span> systemctl enable v4l2-ctrls</code>
      </div>
    </div>

    <div class="section">
      <h3>Uninstall</h3>
      <div class="code-block">
        <code><span class="command">sudo</span> systemctl stop v4l2-ctrls
<span class="command">sudo</span> systemctl disable v4l2-ctrls
<span class="command">sudo</span> rm /etc/systemd/system/v4l2-ctrls.service
<span class="command">sudo</span> rm -rf /home/&lt;user&gt;/v4l2-ctrls
<span class="command">sudo</span> systemctl daemon-reload</code>
      </div>
    </div>

    <div class="section">
      <h3>Troubleshooting</h3>

      <h4>Service Won't Start</h4>
      <div class="code-block">
        <code><span class="comment"># Check logs</span>
<span class="command">sudo</span> journalctl -u v4l2-ctrls -n 50

<span class="comment"># Check if device exists</span>
ls -la /dev/video*

<span class="comment"># Test manually</span>
cd /home/&lt;user&gt;/v4l2-ctrls
source venv/bin/activate
python3 v4l2-ctrls.py --device /dev/video0 --camera-url <span class="string">"http://127.0.0.1/"</span></code>
      </div>

      <h4>Camera Preview Not Working</h4>
      <ol>
        <li>Make sure your camera streamer is running.</li>
        <li>Check the camera URL in the web UI matches your setup.</li>
        <li>Test the URLs directly in a browser (use your configured base URL/prefix):
          <ul>
            <li>MJPG: <code>http://your-pi-ip/stream.mjpg</code></li>
            <li>Snapshot: <code>http://your-pi-ip/snapshot.jpg</code></li>
          </ul>
        </li>
      </ol>

      <h4>Port 5000 Already in Use</h4>
      <p>Change the port in the service file to something else (e.g., 5001):</p>
      <div class="code-block">
        <code><span class="command">sudo</span> nano /etc/systemd/system/v4l2-ctrls.service
<span class="comment"># Change --port 5000 to --port 5001</span>
<span class="command">sudo</span> systemctl daemon-reload
<span class="command">sudo</span> systemctl restart v4l2-ctrls</code>
      </div>
    </div>
  </main>

  <footer>
    <p>
      Made with vibes ü§ñ and coffee ‚òïÔ∏è |
      <a href="https://github.com/justinh-rahb/v4l2-ctrls">GitHub</a> |
      <a href="https://github.com/justinh-rahb/v4l2-ctrls/blob/main/LICENSE">MIT License</a>
    </p>
  </footer>

  <script>
    // Copy to clipboard functionality
    function copyToClipboard(elementId, button) {
      const element = document.getElementById(elementId);
      const text = element.textContent;

      navigator.clipboard.writeText(text).then(() => {
        const originalText = button.innerHTML;
        button.classList.add('copied');
        button.innerHTML = '<svg fill="currentColor" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/></svg>Copied!';

        setTimeout(() => {
          button.classList.remove('copied');
          button.innerHTML = originalText;
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy:', err);
      });
    }

    // Screenshot switching functionality
    function updateScreenshot(variant) {
      const lightScreenshot = document.querySelector('.screenshot-light');
      const darkScreenshot = document.querySelector('.screenshot-dark');
      const lightRadio = document.querySelector('input[value="light"]');
      const darkRadio = document.querySelector('input[value="dark"]');

      if (variant === 'light') {
        lightScreenshot.classList.add('active');
        darkScreenshot.classList.remove('active');
        lightRadio.checked = true;
      } else {
        darkScreenshot.classList.add('active');
        lightScreenshot.classList.remove('active');
        darkRadio.checked = true;
      }
    }

    // Theme toggle functionality
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      // Update screenshot to match new theme
      updateScreenshot(newTheme);
    }

    // Handle manual screenshot switching
    document.querySelectorAll('input[name="screenshot-toggle"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        updateScreenshot(e.target.value);
      });
    });

    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      document.documentElement.setAttribute('data-theme', savedTheme);
      updateScreenshot(savedTheme);
    } else {
      // Default to system preference
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const defaultTheme = prefersDark ? 'dark' : 'light';
      if (!prefersDark) {
        document.documentElement.setAttribute('data-theme', 'light');
      }
      updateScreenshot(defaultTheme);
    }

    // Listen for system theme changes
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      if (!localStorage.getItem('theme')) {
        const newTheme = e.matches ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', newTheme);
        updateScreenshot(newTheme);
      }
    });
  </script>
</body>
</html>
